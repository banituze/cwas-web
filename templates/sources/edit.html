{% extends "base.html" %}
{% block title %}Edit {{ source.name }}{% endblock %}
{% block page_title %}Edit Water Source{% endblock %}
{% block content %}
<div class="card" style="max-width:700px">
    <form method="POST">
        <div class="form-group"><label class="form-label">Source Name</label><input type="text" name="name" class="form-control" value="{{ source.name }}" required></div>
        <div class="form-group"><label class="form-label">Source Type</label><select name="source_type" class="form-control" required>{% for t in source_types %}<option value="{{ t.id }}" {% if source.source_type==t.id %}selected{% endif %}>{{ t.name }}</option>{% endfor %}</select></div>
        <div class="form-group"><label class="form-label">Status</label><select name="status" class="form-control"><option value="active" {% if source.status=='active' %}selected{% endif %}>Active</option><option value="maintenance" {% if source.status=='maintenance' %}selected{% endif %}>Maintenance</option><option value="inactive" {% if source.status=='inactive' %}selected{% endif %}>Inactive</option></select></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
            <div class="form-group"><label class="form-label">Region</label><select name="region" class="form-control" required>{% for r in regions %}<option value="{{ r }}" {% if source.region==r %}selected{% endif %}>{{ r }}</option>{% endfor %}</select></div>
            <div class="form-group"><label class="form-label">District</label><input type="text" name="district" class="form-control" value="{{ source.district }}" required></div>
        </div>
        <div class="form-group"><label class="form-label">Village</label><input type="text" name="village" class="form-control" value="{{ source.village }}"></div>
        <div class="form-group"><label class="form-label">Capacity (L)</label><input type="number" name="capacity" class="form-control" value="{{ source.capacity_liters }}" required></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
            <div class="form-group"><label class="form-label">Open</label><input type="time" name="operating_hours_start" class="form-control" value="{{ source.operating_hours_start }}" required></div>
            <div class="form-group"><label class="form-label">Close</label><input type="time" name="operating_hours_end" class="form-control" value="{{ source.operating_hours_end }}" required></div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
            <div class="form-group"><label class="form-label">Price/L (Ar)</label><input type="number" step="0.5" name="price_per_liter" class="form-control" value="{{ source.price_per_liter }}"></div>
            <div class="form-group"><label class="form-label">Health Score</label><input type="number" name="health_score" class="form-control" value="{{ source.health_score }}" min="0" max="100"></div>
        </div>
        <div class="flex gap-2"><button type="submit" class="btn btn-primary">Save Changes</button><a href="{{ url_for('source_detail', source_id=source.id) }}" class="btn btn-secondary">Cancel</a></div>
    </form>
</div>
{% endblock %}
