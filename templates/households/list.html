{% extends "base.html" %}
{% block title %}Households{% endblock %}
{% block page_title %}Households{% endblock %}
{% block content %}
<div class="card mb-6">
    <form method="GET" class="flex gap-4 items-center" style="flex-wrap:wrap">
        <input type="text" name="search" class="form-control" style="width:250px" placeholder="Search households..." value="{{ search }}">
        <select name="region" class="form-control" style="width:auto"><option value="">All Regions</option>{% for r in regions %}<option value="{{ r }}" {% if region_filter==r %}selected{% endif %}>{{ r }}</option>{% endfor %}</select>
        <button class="btn btn-primary">Search</button>
    </form>
</div>
<div class="card">
    <div class="table-container"><table class="table"><thead><tr><th>Household</th><th>Contact</th><th>Location</th><th>Members</th><th>Balance</th><th>Status</th><th>Actions</th></tr></thead><tbody>
    {% for h in households %}<tr><td><strong>{{ h.household_name }}</strong><br><span class="text-muted">@{{ h.username }}</span></td><td>{{ h.first_name }} {{ h.last_name }}<br><span class="text-muted">{{ h.phone }}</span></td><td>{{ h.district }}<br><span class="text-muted">{{ h.region }}</span></td><td>{{ h.member_count }}</td><td>{{ "{:,.0f}".format(h.account_balance) }} Ar</td><td><span class="badge badge-{% if h.is_active %}active{% else %}inactive{% endif %}">{% if h.is_active %}Active{% else %}Inactive{% endif %}</span></td><td><a href="{{ url_for('household_detail', household_id=h.id) }}" class="btn btn-sm btn-secondary">View</a></td></tr>{% endfor %}
    </tbody></table></div>
</div>
{% endblock %}
