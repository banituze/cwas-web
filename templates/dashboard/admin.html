{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block page_title %}Admin Dashboard{% endblock %}
{% block content %}
<div class="stats-grid">
    <div class="stat-card"><div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></div><div class="stat-content"><div class="stat-value">{{ stats.total_users }}</div><div class="stat-label">Total Users</div></div></div>
    <div class="stat-card"><div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg></div><div class="stat-content"><div class="stat-value">{{ stats.total_households }}</div><div class="stat-label">Households</div></div></div>
    <div class="stat-card"><div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg></div><div class="stat-content"><div class="stat-value">{{ stats.active_sources }}</div><div class="stat-label">Active Sources</div></div></div>
    <div class="stat-card"><div class="stat-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/></svg></div><div class="stat-content"><div class="stat-value">{{ stats.pending_bookings }}</div><div class="stat-label">Pending Bookings</div></div></div>
</div>
<div class="grid grid-2">
    <div class="card">
        <div class="card-header"><h3 class="card-title">Recent Bookings</h3><a href="{{ url_for('bookings_list') }}" class="btn btn-sm btn-secondary">View All</a></div>
        <div class="table-container"><table class="table"><thead><tr><th>Household</th><th>Source</th><th>Date</th><th>Status</th></tr></thead><tbody>
        {% for b in recent_bookings[:5] %}<tr><td>{{ b.household_name }}</td><td>{{ b.source_name }}</td><td>{{ b.booking_date }}</td><td><span class="badge badge-{{ b.status }}">{{ b.status }}</span></td></tr>{% endfor %}
        </tbody></table></div>
    </div>
    <div class="card">
        <div class="card-header"><h3 class="card-title">System Stats</h3></div>
        <div style="padding:20px 0">
            <div style="display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border-color)"><span class="text-muted">Total Water Distributed</span><span style="font-weight:600">{{ "{:,.0f}".format(stats.total_water_distributed) }} L</span></div>
            <div style="display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border-color)"><span class="text-muted">Total Revenue</span><span style="font-weight:600">{{ "{:,.0f}".format(stats.total_revenue) }} Ar</span></div>
            <div style="display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border-color)"><span class="text-muted">Completed Bookings</span><span style="font-weight:600">{{ stats.completed_bookings }}</span></div>
            <div style="display:flex;justify-content:space-between;padding:12px 0"><span class="text-muted">Total Bookings</span><span style="font-weight:600">{{ stats.total_bookings }}</span></div>
        </div>
    </div>
</div>
{% endblock %}
